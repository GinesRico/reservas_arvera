<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Reservas Arvera</title>
<style>
  body { font-family: sans-serif; margin: 20px; }
  #my-cal-inline-citas {
    width: 100%;
    height: 600px;
    border: none;
    overflow: hidden;
  }
  #refresh-btn {
    margin-bottom: 10px;
    padding: 10px 20px;
    background-color: #1a23a1;
    color: white;
    border: none;
    cursor: pointer;
    font-size: 16px;
    border-radius: 5px;
  }
  /* Ocultar elementos extra del calendario si aparecen */
  .cal-header, .cal-nav, .cal-event-type-list { display: none !important; }
</style>
</head>
<body>

<h1>Reserva tu cita</h1>
<button id="refresh-btn">Inicio</button>
<div id="my-cal-inline-citas"></div>

<!-- Script oficial de Cal.com -->
<script src="https://app.cal.com/embed/embed.js"></script>
<script>
  // Inicializa el calendario una sola vez
  function initCal() {
    Cal("init", "citas", { origin: "https://app.cal.com" });
    Cal.ns.citas("inline", {
      elementOrSelector: "#my-cal-inline-citas",
      config: { layout: "column_view", theme: "light" },
      calLink: "arvera/citas"
    });
    Cal.ns.citas("ui", {
      theme: "light",
      cssVarsPerTheme: {
        light: { "cal-brand": "#1a23a1" },
        dark: { "cal-brand": "#fafafa" }
      },
      hideEventTypeDetails: true,
      layout: "column_view"
    });
  }

  // Cargar calendario al inicio
  initCal();

  // Botón para volver a inicio (reset interno)
  document.getElementById("refresh-btn").addEventListener("click", function() {
    // Reset inline sin recargar página
    Cal.ns.citas("inline", {
      elementOrSelector: "#my-cal-inline-citas",
      config: { layout: "column_view", theme: "light" },
      calLink: "arvera/citas"
    });
  });
</script>

</body>
</html>
