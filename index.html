<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Reservas Arvera</title>
<style>
  body {
    margin: 0;
    font-family: sans-serif;
  }
  #my-cal-inline-citas, #google-calendar {
    width: 100%;
    height: 100vh;
    display: none;
    overflow: scroll;
    border: none;
  }
  #refresh-btn, #google-btn {
    position: fixed;
    top: 10px;
    z-index: 1000;
    padding: 10px 20px;
    background-color: #1a23a1;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
  }
  #refresh-btn { left: 10px; }
  #google-btn { left: 120px; }
</style>
<script>
  // Recarga toda la p치gina cada 60 segundos
  setInterval(() => {
    location.reload();
  }, 60000);
</script>
</head>
<body>

<!-- Botones -->
<button id="refresh-btn">Inicio</button>
<button id="google-btn">Google Calendar</button>

<!-- Contenedor Cal.com -->
<div id="my-cal-inline-citas"></div>

<!-- Contenedor Google Calendar -->
<iframe id="google-calendar"
        src="https://calendar.google.com/calendar/embed?src=arvera1982%40gmail.com&ctz=Europe%2FMadrid&mode=WEEK"
        frameborder="0" scrolling="no">
</iframe>

<!-- Cal inline embed code begins -->
<script type="text/javascript">
(function (C, A, L) { 
  let p = function (a, ar) { a.q.push(ar); }; 
  let d = C.document; 
  C.Cal = C.Cal || function () { 
    let cal = C.Cal; 
    let ar = arguments; 
    if (!cal.loaded) { 
      cal.ns = {}; 
      cal.q = cal.q || []; 
      d.head.appendChild(d.createElement("script")).src = A; 
      cal.loaded = true; 
    } 
    if (ar[0] === L) { 
      const api = function () { p(api, arguments); }; 
      const namespace = ar[1]; 
      api.q = api.q || []; 
      if(typeof namespace === "string"){cal.ns[namespace] = cal.ns[namespace] || api;p(cal.ns[namespace], ar);p(cal, ["initNamespace", namespace]);} 
      else p(cal, ar); 
      return;
    } 
    p(cal, ar); 
  }; 
})(window, "https://app.cal.com/embed/embed.js", "init");

Cal("init", "citas", {origin:"https://app.cal.com"});

Cal.ns.citas("inline", {
  elementOrSelector:"#my-cal-inline-citas",
  config: {"layout":"column_view","theme":"light"},
  calLink: "arvera/citas",
});

Cal.ns.citas("ui", {
  "theme":"light",
  "cssVarsPerTheme":{
    "light":{"cal-brand":"#1a23a1"},
    "dark":{"cal-brand":"#fafafa"}
  },
  "hideEventTypeDetails":false,
  "layout":"column_view"
});
</script>
<!-- Cal inline embed code ends -->

<script>
  const calDiv = document.getElementById("my-cal-inline-citas");
  const googleFrame = document.getElementById("google-calendar");
  const refreshBtn = document.getElementById("refresh-btn");
  const googleBtn = document.getElementById("google-btn");

  // Mostrar Cal.com por defecto
  calDiv.style.display = "block";

  // Bot칩n Inicio: recarga la p치gina
  refreshBtn.addEventListener("click", () => {
    location.reload();
  });

  // Bot칩n Google Calendar: alternar vista
  googleBtn.addEventListener("click", () => {
    calDiv.style.display = "none";
    googleFrame.style.display = "block";
  });
</script>

</body>
</html>
