<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Reservas Arvera</title>
<style>
  body {
    margin: 0;
    font-family: sans-serif;
  }
  /* Desplazamos los contenedores hacia abajo 60px para no tapar los botones */
  #my-cal-inline-citas, #google-calendar {
    width: 100%;
    height: calc(100vh - 60px);
    display: none;
    overflow: scroll;
    border: none;
    margin-top: 60px;
  }

  /* Botones flotantes */
  #refresh-btn, #google-btn {
    position: fixed;
    top: 10px;
    z-index: 1000;
    background-color: #1a23a1;
    border: none;
    border-radius: 5px;
    padding: 8px;
    cursor: pointer;
  }

  /* Posición de los botones */
  #refresh-btn { left: 10px; }
  #google-btn { left: 60px; }

  #refresh-btn svg, #google-btn svg {
    display: block;
    width: 24px;
    height: 24px;
    fill: white;
  }
</style>

<!-- Recarga automática cada 60 segundos -->
<script>
  setInterval(() => {
    location.reload();
  }, 60000);
</script>
</head>
<body>

<!-- Botones flotantes -->
<button id="refresh-btn" title="Inicio">
  <!-- Icono casa -->
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M12 3l9 8h-3v9h-12v-9h-3l9-8z"/>
  </svg>
</button>

<button id="google-btn" title="Google Calendar">
  <!-- Icono calendario alternativo -->
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7 10h5v5h-5zM3 4v2h18v-2h-2v-2h-2v2h-8v-2h-2v2h-2zm18 18h-18v-14h18v14z"/>
  </svg>
</button>

<!-- Contenedor Cal.com -->
<div id="my-cal-inline-citas"></div>

<!-- Contenedor Google Calendar -->
<iframe id="google-calendar"
        src="https://calendar.google.com/calendar/embed?src=arvera1982%40gmail.com&ctz=Europe%2FMadrid&mode=WEEK"
        frameborder="0" scrolling="no">
</iframe>

<!-- Cal inline embed code -->
<script type="text/javascript">
(function (C, A, L) { 
  let p = function (a, ar) { a.q.push(ar); }; 
  let d = C.document; 
  C.Cal = C.Cal || function () { 
    let cal = C.Cal; 
    let ar = arguments; 
    if (!cal.loaded) { 
      cal.ns = {}; 
      cal.q = cal.q || []; 
      d.head.appendChild(d.createElement("script")).src = A; 
      cal.loaded = true; 
    } 
    if (ar[0] === L) { 
      const api = function () { p(api, arguments); }; 
      const namespace = ar[1]; 
      api.q = api.q || []; 
      if(typeof namespace === "string"){cal.ns[namespace] = cal.ns[namespace] || api;p(cal.ns[namespace], ar);p(cal, ["initNamespace", namespace]);} 
      else p(cal, ar); 
      return;
    } 
    p(cal, ar); 
  }; 
})(window, "https://app.cal.com/embed/embed.js", "init");

Cal("init", "citas", {origin:"https://app.cal.com"});

Cal.ns.citas("inline", {
  elementOrSelector:"#my-cal-inline-citas",
  config: {"layout":"column_view","theme":"light"},
  calLink: "arvera/citas",
});

Cal.ns.citas("ui", {
  "theme":"light",
  "cssVarsPerTheme":{
    "light":{"cal-brand":"#1a23a1"},
    "dark":{"cal-brand":"#fafafa"}
  },
  "hideEventTypeDetails":false,
  "layout":"column_view"
});
</script>

<script>
  const calDiv = document.getElementById("my-cal-inline-citas");
  const googleFrame = document.getElementById("google-calendar");
  const refreshBtn = document.getElementById("refresh-btn");
  const googleBtn = document.getElementById("google-btn");

  // Mostrar Cal.com por defecto
  calDiv.style.display = "block";

  // Botón Inicio: recarga la página
  refreshBtn.addEventListener("click", () => {
    location.reload();
  });

  // Botón Google Calendar: mostrar iframe
  googleBtn.addEventListener("click", () => {
    calDiv.style.display = "none";
    googleFrame.style.display = "block";
  });
</script>

</body>
</html>
